name: Release 
on:
    push:
        branches:
            - main

jobs:
    release:
        runs-on: macos-latest
        steps:
            - uses: actions/checkout@v4
            - name: Install Taskfile
              uses: arduino/setup-task@v1
              with:
                repo-token: ${{ secrets.GITHUB_TOKEN }}

            - name: Version
              uses: paulhatch/semantic-version@v5
              id: version

            - name: Tag
              uses: rickstaa/action-create-tag@v1
              with:
                tag: ${{ steps.version.outputs.version_tag }}

            - name: Release
              run: task release TAG=${{ steps.version.outputs.version_tag }}


